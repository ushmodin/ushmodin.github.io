---
layout: post
title: CriptoLocker-safety
tags:
  - crypto-virus
  - btsync
  - bacula
  - backup
main-class: backup
categories:
  - backup  
introduction: Борьба с крипто-фирусами
---

**Друзья, всем привет!**

Решил не дожидаться звонка от мамы с жалобами о том, что комп поймал крипто-вирус и все фоточки потеряны. Антивирус конечно есть, и права у нее только пользовательские. Но это все не дает 100% гарантии. Т.к. вирус может проскочить мимо защиты и ему будет достаточно пользовательских прав чтобы зашифровать файлы. Как мне кажется единственный вариант сохранить данные это делать бекапы.

Приобрел аппаратные средства - жесткий диск на 2ТБ. Начал искать программные средства. Требования: должно быть бесплатно и работать на linux и windows. Еще очень важно это `Версеонирование`: старые данные нельзя перезаписывать и удалять.

Давно использую [BTSync](https://www.resilio.com/) для синхронизации тех же фоточек между компами родни. Все уже привыкли - если надо чем-то поделиться, но нельзя выкладывать в социалки, то кидай в каталог Dropbox (название осталось от [dropbox.com](https://www.dropbox.com)). На тот момент я думал, что BTSync не решает задачу версеонирования.

На stackoverflow.com нашел рекомендацию использовать [Bacula](https://ru.wikipedia.org/wiki/Bacula). Это мощная клиент серверная штуковина. Её пришлось прям изучать. Тратить время по вечерам на документацию и статьи, пробовать разные конфигурации в песочнице. Весело короче. Но настроил и заработало,фоточки были в сохранности. Минусов конечно много и они большие: 1) технология не для простых смертных, а для админов 2) все причастные к процессу компы должны быть в одной сети (я использовал VPN) 3) прерванные процесс бекапа нельзя продолжить, можно только начать заново (а фоток сотни гигабайт). 

Интуиция подсказывала что что-то идет не так, и все должно быть проще. И действительно, в документации к btsync нашел [статью](https://help.resilio.com/hc/en-us/articles/204754239-Using-Archive-for-file-versioning-and-restoring-deleted-files-) что он по умолчанию все удаленные или измененные файл складывает в каталог .sync/Archive. Это ведь то что нужно - файлы синхронизируются, установка/настройка элементарная, единая сеть не нужна, выключай/включай компьютеры когда захочешь. И даже если файлы будут зашифрованы их оригиналы будут сохранены. По умолчанию файлы хранятся 30 дней, но это можно изменить. На всякий случай, поставил - 0 т.е. хранить "вечно". Проверил - удалил/изменил фоточки. На компе где стоит главный винт с бекапами,оригиналы измененных файлов появились в каталоге Archive. 

Задача решена, вероятность потерять фоточки снизилась ))
